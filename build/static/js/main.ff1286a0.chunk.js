(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(28)},21:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),c=a.n(r),l=a(5),s=a(6),i=a(8),u=a(7),d=a(9),h=a(30),m=a(12),f="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:k},b=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(m.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=(a(21),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).updateShelf=function(e){a.props.updateShelf(a.props.book,e.target.value)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.currentShelf;return o.a.createElement("select",{onChange:this.updateShelf,defaultValue:e},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))}}]),t}(n.Component)),y=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.book,a=e.updateShelf;return o.a.createElement("li",{key:t.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks&&t.imageLinks.thumbnail?t.imageLinks.thumbnail:"",")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement(E,{book:t,updateShelf:a,currentShelf:t.shelf||"none"}))),o.a.createElement("div",{className:"book-title"},t.title),t.authors&&t.authors.map(function(e,t){return o.a.createElement("div",{className:"book-authors",key:t},e)})))}}]),t}(n.Component),g=a(29),N=function(e){var t=e.currently_reading,a=e.want_to_read,n=e.read,r=e.updateShelf;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return o.a.createElement(y,{book:e,key:e.id,updateShelf:r})})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},a.map(function(e){return o.a.createElement(y,{book:e,key:e.id,updateShelf:r})})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n.map(function(e){return o.a.createElement(y,{book:e,key:e.id,updateShelf:r})})))))),o.a.createElement("div",{className:"open-search"},o.a.createElement(g.a,{to:"/search"},o.a.createElement("button",null,"Add a book"))))},S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",showingBooks:[]},a.updateQuery=function(e){var t=e.target.value;a.setState({query:t}),t?a.props.searchBook(t.trim()).then(function(e){e.length>0?(e.map(function(e){return a.props.checkBook(e)}),a.setState({showingBooks:e})):a.setState({showingBooks:[]})}):a.setState({showingBooks:[]})},a.clearQuery=function(){a.setState({query:""})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.updateShelf,a=(e.searchBook,e.checkBook),n=this.state,r=n.query,c=n.showingBooks;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(g.a,{to:"/"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:r,onChange:this.updateQuery}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},c.map(function(e){return o.a.createElement(y,{book:e,key:e.id,updateShelf:t,checkBook:a})})))))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={currently_reading:[],want_to_read:[],read:[],all_books:[]},a.checkBook=function(e){a.state.want_to_read.map(function(t){t.id===e.id&&(console.log("mudou"),e.shelf=t.shelf)}),a.state.currently_reading.map(function(t){t.id===e.id&&(console.log("mudou"),e.shelf=t.shelf)}),a.state.read.map(function(t){t.id===e.id&&(console.log("mudou"),e.shelf=t.shelf)})},a.updateShelf=function(e,t){b(e,t),e.shelf=t,a.setState(function(a){var n=a.currently_reading.filter(function(t){return t.id!==e.id}),o=a.want_to_read.filter(function(t){return t.id!==e.id}),r=a.read.filter(function(t){return t.id!==e.id});switch(t){case"currentlyReading":n=a.currently_reading.concat(e);break;case"wantToRead":o=a.want_to_read.concat(e);break;case"read":r=a.read.concat(e)}return{currently_reading:n,want_to_read:o,read:r,all_books:a.all_books}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(f,"/books"),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setState({currently_reading:t.filter(function(e){return"currentlyReading"===e.shelf}),want_to_read:t.filter(function(e){return"wantToRead"===e.shelf}),read:t.filter(function(e){return"read"===e.shelf}),all_books:t})})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(h.a,{exact:!0,path:"/",render:function(){return o.a.createElement(N,{currently_reading:e.state.currently_reading,want_to_read:e.state.want_to_read,read:e.state.read,updateShelf:e.updateShelf})}}),o.a.createElement(h.a,{path:"/search",render:function(t){t.history;return o.a.createElement(S,{updateShelf:e.updateShelf,searchBook:v,checkBook:e.checkBook})}}))}}]),t}(o.a.Component),w=(a(26),a(31));c.a.render(o.a.createElement(w.a,null,o.a.createElement(_,null)),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.ff1286a0.chunk.js.map